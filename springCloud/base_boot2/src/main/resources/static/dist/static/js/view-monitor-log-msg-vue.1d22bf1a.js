(window.webpackJsonp=window.webpackJsonp||[]).push([["view-monitor-log-msg-vue"],{G6u5:function(t,e,n){"use strict";n.r(e);var s=n("zH15"),i=n.n(s),o=n("dNE1"),c=n.n(o),a=n("7Qib"),l={name:"Msg",data:function(){return{height:document.documentElement.clientHeight-132+"px;",data:[{name:"elAdmin-",timestamp:Object(a.c)(new Date),threadName:"system-prompt-message",level:"INFO",className:"me.zhengjie.AppRun :",body:"(*^ω^*) 欢迎使用，暂无日志输出~",exception:""}],INFO:"#0000ff",WARN:"#FFFF00",ERROR:"#FF0000",DEBUG:"#DEA000"}},watch:{data:{handler:function(t,e){this.$nextTick(function(){var t=document.getElementById("console");t.scrollTop=t.scrollHeight})}}},mounted:function(){this.initWebSocket()},beforeDestroy:function(){this.disconnect(),clearInterval(this.timer)},methods:{time:function(t){return Object(a.c)(t)},initWebSocket:function(){var t=this;this.connection(this),this.timer=setInterval(function(){try{t.stompClient.send("test")}catch(e){console.log("断线了: "+e),t.connection()}},5e3)},connection:function(t){var e=this,n=new i.a("http://localhost:8000/websocket?token=kl");this.stompClient=c.a.over(n);this.stompClient.connect({token:"k1"},function(n){e.stompClient.subscribe("/topic/logMsg",function(n){var s=JSON.parse(n.body);s.name="elAdmin-",console.log(t.data),e.data.push(s)})},function(t){console.log(t)})},disconnect:function(){null!=this.stompClient&&(this.stompClient.disconnect(),clearInterval(this.timer))},getColor:function(t){return"INFO"===t?this.INFO:"WARN"===t?this.WARN:"DEBUG"===t?this.DEBUG:this.ERROR}}},r=(n("k/TD"),n("KHd+")),m=Object(r.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),t._v(" "),n("div",{staticClass:"console",style:"height:"+t.height,attrs:{id:"console"}},t._l(t.data,function(e){return n("div",{key:e.time},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("span",{staticStyle:{color:"#CD0066"}},[t._v(t._s(t.time(e.timestamp)+" "))]),t._v(" "),n("span",{staticStyle:{color:"#00CD00"}},[t._v(t._s(e.threadName+" "))]),t._v(" "),n("span",{style:"color:"+t.getColor(e.level)},[t._v("\n        "+t._s(e.level+" ")+"\n      ")]),t._v(" "),n("span",{staticStyle:{color:"#DE00CC"}},[t._v(t._s(e.className+" "))]),t._v(" "),n("span",{domProps:{innerHTML:t._s(e.body)}}),t._v(" "),n("span",[t._v(t._s(e.exception))])])}))])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle"},[e("div",{staticClass:"buttons"},[e("button",{staticClass:"closes"}),this._v(" "),e("button",{staticClass:"minimize"}),this._v(" "),e("button",{staticClass:"maximize"})]),this._v(" "),e("span",{staticClass:"title"},[this._v("real-time console")])])}],!1,null,"63cf9023",null);m.options.__file="msg.vue";e.default=m.exports},"fDe/":function(t,e,n){},"k/TD":function(t,e,n){"use strict";var s=n("fDe/");n.n(s).a}}]);